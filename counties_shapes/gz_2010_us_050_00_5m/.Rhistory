# initialize libraries
library(shiny)
library(plyr)
library(dplyr)
library(ggplot2)
library(rgdal)    # for readOGR(...)
# move up one directory
setwd("..")
#import some data
# Note, you have to delete the comments at the end of the text files.
asian<- read.delim("wonder_data_extracts/Natality_2015_asian.txt",
sep = "\t",
header = TRUE)
american_indian<- read.delim("wonder_data_extracts/Natality_2015_american_indian.txt",
sep = "\t",
header = TRUE)
black<- read.delim("wonder_data_extracts/Natality_2015_black.txt",
sep = "\t",
header = TRUE)
white_1<- read.delim("wonder_data_extracts/Natality_2015_white_1.txt",
sep = "\t",
header = TRUE)
white_2<- read.delim("wonder_data_extracts/Natality_2015_white_2.txt",
sep = "\t",
header = TRUE)
white_3<- read.delim("wonder_data_extracts/Natality_2015_white_3.txt",
sep = "\t",
header = TRUE)
# append all of the data
natality<- rbind(asian
,american_indian
,black
,white_1
,white_2
,white_3) %>%
select(-Notes)
# county and FIPS codes from https://www.census.gov/geo/reference/codes/cou.html
counties<- read.delim("national_county.txt", header = FALSE, sep = ",") %>%
rename_("state_code" = "V1",
"fips_state" = "V2",
"fips_county" = "V3",
"county_name" = "V4",
"fips_class" = "V5")
# following stack overflow example
setwd("~/counties_shapes/")
# following stack overflow example
setwd("./counties_shapes/")
getwd()
US.counties <- readOGR(dsn=".",layer="gz_2010_us_050_00_5m")
?readOGR
# following stack overflow example
setwd("./counties_shapes/gz_2010_us_050_00_5m")
# following stack overflow example
setwd("./gz_2010_us_050_00_5m")
getwd()
US.counties <- readOGR(dsn=".",layer="gz_2010_us_050_00_5m")
#leave out AK, HI, and PR (state FIPS: 02, 15, and 72)
US.counties <- US.counties[!(US.counties$STATE %in% c("02","15","72")),]
county.data <- US.counties@data
county.data <- cbind(id=rownames(county.data),county.data)
county.data <- data.table(county.data)
library(data.table)
library(dtplyr)
install.packages("dtplyr")
county.data <- data.table(county.data)
head(county.data)
county.data[,FIPS:=paste0(STATE,COUNTY)] # this is the state + county FIPS code
head(county.data)
setkey(county.data,FIPS)
# county and FIPS codes from https://www.census.gov/geo/reference/codes/cou.html
counties<- read.delim("national_county.txt", header = FALSE, sep = ",") %>%
rename_("state_code" = "V1",
"fips_state" = "V2",
"fips_county" = "V3",
"county_name" = "V4",
"fips_class" = "V5") %>%
mutate(fips = paste0(fips_state, fips_county))
# county and FIPS codes from https://www.census.gov/geo/reference/codes/cou.html
counties<- read.delim("national_county.txt", header = FALSE, sep = ",") %>%
counties_2<- counties %>%
rename_("state_code" = "V1",
"fips_state" = "V2",
"fips_county" = "V3",
"county_name" = "V4",
"fips_class" = "V5") %>%
mutate(fips = paste0(fips_state, fips_county))
